<!doctype html>







































<html
  class="not-ready lg:text-base"
  style="--bg: #faf8f1"
  lang="en-us"
>
  <head><script src="/blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=blog/livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Scala notes - Azure</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="Elements Evaluation strategy Call-by-value:
A strict evaluation strategy, in which the expression is evaluated and bound to the corresponding parameter before the function body is evaluated.
The val form is CBV.
val z ={ println(&#34;z&#34;); 3 } Running this will give
z val z: Int = 3 Calling z will not print &ldquo;z&rdquo; because it has been evaluated while defined.
Scala uses CBV by default.
Call-by-name:
A non-strict evaluation strategy which will defer the evaluation of the expression until the program needs it." />
  <meta name="author" content="Axiwa" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="http://localhost:1313/blog/main.min.css" />

  
  
  
  
  
  <link rel="preload" as="image" href="http://localhost:1313/blog/theme.png" />

  
  
  
  
  <link rel="preload" as="image" href="https://avatars.githubusercontent.com/u/23453707?s=400&amp;u=54da7b5e1e7d8acd4ddb973963f7d8c4a27bf860&amp;v=4" />
  
  

  
  
  <link rel="preload" as="image" href="http://localhost:1313/blog/github.svg" />
  
  <link rel="preload" as="image" href="http://localhost:1313/blog/rss.svg" />
  
  

  
  
  <script
    defer
    src="http://localhost:1313/blog/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  
  

  
  <link rel="icon" href="http://localhost:1313/blog/favicon.ico" />
  <link rel="apple-touch-icon" href="http://localhost:1313/blog/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.128.2">

  
  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[4.5rem] max-w-3xl px-8 lg:justify-center">
  <div class="relative z-50 mr-auto flex items-center">
    <a
      class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold"
      href="http://localhost:1313/blog/"
      >Azure</a
    >
    <div
      class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 -mr-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
    role="button"
    aria-label="Menu"
  ></div>

  

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#faf8f1'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    
    <nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6">
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="https://axiwa.github.io/"
        >Life</a
      >
      
    </nav>
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6"
    >
      
      <a
        class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/axiwa"
        target="_blank"
        rel="me"
      >
        github
      </a>
      
      <a
        class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./rss.svg)"
        href="http://localhost:1313/blog/index.xml"
        target="_blank"
        rel="alternate"
      >
        rss
      </a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl px-8 pb-16 pt-12 dark:prose-invert"
    >
      

<article>
  <header class="mb-16">
    <h1 class="!my-0 pb-2.5">Scala notes</h1>

    
    <div class="text-sm antialiased opacity-60">
      
      <time>Apr 2, 2023</time>
      
      
      
      
    </div>
    
  </header>

  <section><h1 id="elements">Elements</h1>
<h2 id="evaluation-strategy">Evaluation strategy</h2>
<p><strong>Call-by-value</strong>:</p>
<p>A strict evaluation strategy, in which the expression is evaluated and bound to the corresponding parameter before the function body is evaluated.</p>
<p>The <code>val</code> form is CBV.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> z <span style="color:#f92672">={</span>
</span></span><span style="display:flex;"><span>    println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;z&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Running this will give</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>z
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> z<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
</span></span></code></pre></div><p>Calling <code>z</code> will not print &ldquo;z&rdquo; because it has been evaluated while defined.</p>
<p>Scala uses CBV by default.</p>
<p><strong>Call-by-name</strong>:</p>
<p>A non-strict evaluation strategy which will defer the evaluation of the expression until the program needs it.</p>
<p>The <code>def</code> form is CBN.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> z <span style="color:#f92672">={</span>
</span></span><span style="display:flex;"><span>    println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;z&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Running this will only give</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> z<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span>
</span></span></code></pre></div><p>But every time calling <code>z</code> will print &ldquo;z&rdquo;.</p>
<p>Definitions of functions can have parameters. To make a parameter CBN just add <code>=&gt;</code> before the type.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> constOne<span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> y<span style="color:#66d9ef">:</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Int</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p><code>x</code> is CBV, and <code>y</code> is CBN.</p>
<p><strong>Lazy evaluation</strong>
Avoid computing the elements of a sequence until they are needed for the evaluation result. See [LazyList].</p>
<p>To solve the problem of recomputing many times, we can store the result of the first evaluation of a value and reuse the stored result instead of recomputing.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">lazy</span> <span style="color:#66d9ef">val</span> y <span style="color:#66d9ef">=</span> <span style="color:#f92672">{</span> print <span style="color:#f92672">(</span><span style="color:#e6db74">&#34;y&#34;</span><span style="color:#f92672">);</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="termination-of-evaluation-strategy">Termination of evaluation strategy</h3>
<p>If CBV evaluation of an expression eterminates, then CBN evaluation terminates, too.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> first<span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> y<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span>x
</span></span><span style="display:flex;"><span>first<span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">,</span>loop<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>Under CBN it will give 1, while under CBV it will loop.</p>
<h2 id="blocks-and-lexical-scope">Blocks and Lexical Scope</h2>
<p><strong>Blocks</strong>: {} The last element of a block is an expression that defines its value. The definitions inside a block are only visible from within the block, and will shadow definitions of the same names outside the block (Definitions of outer blocks are visible inside a block unless they are shadowed).</p>
<p>In Scala 3, braces are optional around a <strong>correctly</strong> intented expression that appears after <code>=, then, else, ...</code></p>
<h2 id="tail-recursion">Tail recursion</h2>
<p>One can equire that a function is tail-recursive using a @tailrec annotation:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> scala.annotation.tailrec
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@tailrec</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> factorial<span style="color:#f92672">(...)</span><span style="color:#66d9ef">:</span><span style="color:#66d9ef">Int</span> <span style="color:#f92672">=</span> <span style="color:#f92672">...</span>
</span></span></code></pre></div><h2 id="higher-order-functions">Higher-order functions</h2>
<p>Type <code>A =&gt; B</code> is the type of a function that takes an argument of type A and returns a result of type B. Anonymous Functions can be expressed as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#f92672">(</span>x1<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">T1</span><span style="color:#f92672">,...,</span>xn<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Tn</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=&gt;</span> E
</span></span></code></pre></div><p>which means</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> f<span style="color:#f92672">(</span>x1<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">T1</span><span style="color:#f92672">,...,</span>xn<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Tn</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> E<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>f
</span></span></code></pre></div><p>E is the body and x_n is the parameters of the function.</p>
<p>The definintion of funtions that return funtions is useful.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> f<span style="color:#f92672">(</span>ps_1<span style="color:#f92672">)...(</span>ps_n<span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> E
</span></span></code></pre></div><p>where n&gt;1, is equivalent to</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> f<span style="color:#f92672">(</span>ps_1<span style="color:#f92672">)...(</span>ps_n_1<span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">{</span><span style="color:#66d9ef">def</span> g<span style="color:#f92672">(</span>ps_n<span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> E<span style="color:#f92672">;</span> g<span style="color:#f92672">}</span>
</span></span></code></pre></div><p>So the left side needs to take <code>ps_n</code> and return E of all the parameters.</p>
<p>By repeating the process, the expression is shown to be equivalent to</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> f <span style="color:#66d9ef">=</span> <span style="color:#f92672">(</span>ps_1 <span style="color:#66d9ef">=&gt;</span> <span style="color:#f92672">(</span>ps_2 <span style="color:#66d9ef">=&gt;</span> <span style="color:#f92672">(...(</span>ps_n <span style="color:#66d9ef">=&gt;</span> E<span style="color:#f92672">))))</span>
</span></span></code></pre></div><p>Note that function types <strong>associate to the right</strong>, whiuich means</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#a6e22e">Int</span> <span style="color:#66d9ef">=&gt;</span> <span style="color:#a6e22e">Int</span> <span style="color:#66d9ef">=&gt;</span> <span style="color:#a6e22e">Int</span>
</span></span><span style="display:flex;"><span>is equivalent to 
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Int</span> <span style="color:#66d9ef">=&gt;</span> <span style="color:#f92672">(</span><span style="color:#a6e22e">Int</span> <span style="color:#66d9ef">=&gt;</span> <span style="color:#a6e22e">Int</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><h2 id="data-abstraction">Data abstraction</h2>
<h3 id="class">Class</h3>
<p><strong>Abstract Classes</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IntSet</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">incl</span><span style="color:#f92672">(</span><span style="color:#66d9ef">x:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">IntSet</span> <span style="color:#75715e">//insert an elem
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">def</span> contains<span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span>
</span></span></code></pre></div><p>Abstract classes can (but not necessarily) contain members which are missing an implementation.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Empty</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">IntSet</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">contains</span><span style="color:#f92672">(</span><span style="color:#66d9ef">x:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> incl<span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">IntSet</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">NonEmpty</span><span style="color:#f92672">(</span>x<span style="color:#f92672">,</span> <span style="color:#a6e22e">Empty</span><span style="color:#f92672">(),</span> <span style="color:#a6e22e">Empty</span><span style="color:#f92672">())</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">NonEmpty</span><span style="color:#f92672">(</span>elem<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> left<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">IntSet</span><span style="color:#f92672">,</span> right<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">IntSet</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">IntSet</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">contains</span><span style="color:#f92672">(</span><span style="color:#66d9ef">x:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span> <span style="color:#f92672">=</span> <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> incl<span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">IntSet</span> <span style="color:#f92672">=</span> <span style="color:#f92672">...</span>
</span></span></code></pre></div><p><code>Empty</code> and <code>NonEmpty</code> extend the class <code>IntSet</code>, and they are <em>subclass</em> of <code>IntSet</code>. <code>IntSet</code> is the <em>superclass</em> of <code>Empty</code> and <code>NonEmpty</code>.</p>
<p>It is possible to redefine an existing, non-abstract definition in a subclass by using <code>override def</code>.</p>
<h3 id="objects">Objects</h3>
<p>Create an object by calling the constructor of the class.</p>
<p><code>Object definition</code> defines a singleton object of an abstract class.Once it is defined, no other instance of it can be created. Singleton object evaluates to itself. Objects live in the term namespace, whereas classes live inthe type namespace.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">object</span> <span style="color:#a6e22e">Empty</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">IntSet</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">contains</span><span style="color:#f92672">(</span><span style="color:#66d9ef">x:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> incl<span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">IntSet</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">NonEmpty</span><span style="color:#f92672">(</span>x<span style="color:#f92672">,</span> <span style="color:#a6e22e">Empty</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Empty</span><span style="color:#f92672">)</span> 
</span></span></code></pre></div><p>If a class and object with the same name are given in the same sourcefile, we call them <code>companions</code>. A companion object of a class plays a role similar to static class definitions.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IntSet</span> <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">object</span> <span style="color:#a6e22e">IntSet</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">singleton</span><span style="color:#f92672">(</span><span style="color:#66d9ef">x:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">NonEmpty</span><span style="color:#f92672">(</span>x<span style="color:#f92672">,</span> <span style="color:#a6e22e">Empty</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Empty</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p>It is possible to create standalone applications in Scala using an object with a main method. Or just add a <code>@main</code> before the function definition.</p>
<p>To place a class or object inside a package, use a package cluase at the top of the source file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">package</span> example
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">object</span> <span style="color:#a6e22e">Hello</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rational</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> scala example<span style="color:#f92672">.</span><span style="color:#a6e22e">Hello</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">import</span> example.Rational
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">import</span> example._
</span></span></code></pre></div><h4 id="objects-everywhere-lec-134">Objects everywhere [Lec 1.3.4]</h4>
<p>Boolean type can be implemented like normal classes.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Boolean</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">AnyVal</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">ifThenElse</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">](</span>t<span style="color:#66d9ef">:</span> <span style="color:#f92672">=&gt;</span> T<span style="color:#f92672">,</span> e<span style="color:#66d9ef">:</span> <span style="color:#f92672">=&gt;</span>T<span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">T</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Boolean</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span> <span style="color:#f92672">=</span> ifThenElse<span style="color:#f92672">(</span>x<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#f92672">||</span> <span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Boolean</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span> <span style="color:#f92672">=</span> ifThenElse<span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">,</span> x<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">object</span> <span style="color:#a6e22e">true</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Boolean</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">ifThenELese</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">](</span>t<span style="color:#66d9ef">:</span> <span style="color:#f92672">=&gt;</span> T<span style="color:#f92672">,</span>e<span style="color:#66d9ef">:</span> <span style="color:#f92672">=&gt;</span> T<span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> t
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">object</span> <span style="color:#a6e22e">false</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Boolean</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">ifThenELese</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">](</span>t<span style="color:#66d9ef">:</span> <span style="color:#f92672">=&gt;</span> T<span style="color:#f92672">,</span>e<span style="color:#66d9ef">:</span> <span style="color:#f92672">=&gt;</span> T<span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> e
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>extension <span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#f92672">===&gt;</span> <span style="color:#f92672">(</span>y<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> x<span style="color:#f92672">.</span>ifThenElse<span style="color:#f92672">(</span>y<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p>Natural numbers can be implemented like normal classes. Function values are treated as objects in Scala, and functions are objects with <code>apply</code> methods.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> <span style="color:#a6e22e">Function</span><span style="color:#f92672">[</span><span style="color:#66d9ef">A</span>,<span style="color:#66d9ef">B</span><span style="color:#f92672">]</span><span style="color:#a6e22e">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> apply<span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">A</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">B</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=&gt;</span> x<span style="color:#f92672">*</span>x
</span></span><span style="display:flex;"><span><span style="color:#75715e">//means
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Function</span><span style="color:#f92672">[</span><span style="color:#66d9ef">Int</span>, <span style="color:#66d9ef">Int</span><span style="color:#f92672">]</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">apply</span><span style="color:#f92672">(</span><span style="color:#66d9ef">x:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#f92672">=</span> x<span style="color:#f92672">*</span>x
</span></span></code></pre></div><p>A function call f(a,b) is expanded to f.apply(a,b)</p>
<h3 id="trait">Trait</h3>
<p>A class has several natural supertypes to which it conforms or from which it wants to inherit code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> <span style="color:#a6e22e">Planar</span><span style="color:#66d9ef">:</span> 
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">height:</span> <span style="color:#66d9ef">Int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> width<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> surface <span style="color:#66d9ef">=</span> height <span style="color:#f92672">*</span> width
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Square</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Planar</span> 
</span></span></code></pre></div><p>Classes, object and traits can inherit from at most one class but arbitrary many traits.</p>
<h3 id="methods">Methods</h3>
<p>Package functions operating on a data abstraction in the data abstraction itself. Such functions inside the class are called methods.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rational</span><span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> y<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">require</span><span style="color:#f92672">(</span><span style="color:#66d9ef">y!=</span><span style="color:#960050;background-color:#1e0010">0</span><span style="color:#f92672">,</span> <span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#66d9ef">denominator</span> <span style="color:#66d9ef">must</span> <span style="color:#66d9ef">be</span> <span style="color:#66d9ef">non-zero</span><span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">def</span> gcd<span style="color:#f92672">(</span>a<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> b<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span> <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> b<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> then a <span style="color:#66d9ef">else</span> gcd<span style="color:#f92672">(</span>b<span style="color:#f92672">,</span> a<span style="color:#f92672">%</span>b<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> g <span style="color:#66d9ef">=</span> gcd<span style="color:#f92672">(</span>x<span style="color:#f92672">.</span>abs<span style="color:#f92672">,</span> y<span style="color:#f92672">.</span>abs<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">val</span> numer <span style="color:#66d9ef">=</span> x<span style="color:#f92672">/</span>g
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> denom <span style="color:#66d9ef">=</span> y<span style="color:#f92672">/</span>g
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> add<span style="color:#f92672">(</span>r<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Rational</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> 
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Rational</span><span style="color:#f92672">(</span>numer <span style="color:#f92672">*</span> r<span style="color:#f92672">.</span>denom <span style="color:#f92672">+</span> r<span style="color:#f92672">.</span>numer <span style="color:#f92672">*</span> denom<span style="color:#f92672">,</span> denom <span style="color:#f92672">*</span> r<span style="color:#f92672">.</span>denom<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> neg <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Rational</span><span style="color:#f92672">(-</span>numer<span style="color:#f92672">,</span> denom<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">override</span> <span style="color:#66d9ef">def</span> toString <span style="color:#66d9ef">=</span> <span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">$numer</span><span style="color:#e6db74">/</span><span style="color:#e6db74">$denom</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>end <span style="color:#a6e22e">Rational</span> <span style="color:#75715e">// `end` must align with the opening keyword, followed by the name in the definition.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> x <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Rational</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">,</span><span style="color:#ae81ff">2</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> y <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Rational</span><span style="color:#f92672">(</span><span style="color:#ae81ff">3</span><span style="color:#f92672">,</span><span style="color:#ae81ff">4</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>x<span style="color:#f92672">.</span>g <span style="color:#75715e">//Error: value g in class Rational cannot be accessed as a member of x
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>x<span style="color:#f92672">.</span>add<span style="color:#f92672">(</span>y<span style="color:#f92672">)</span> <span style="color:#75715e">//x+y
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//
</span></span></span></code></pre></div><p><code>private</code> means it cannot be called outside the class.</p>
<h3 id="self-reference">Self reference</h3>
<p>On the inside of a class, the name <code>this</code> represents the object on which the current method is executed.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rational</span><span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> y<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">less</span><span style="color:#f92672">(</span><span style="color:#66d9ef">that:</span> <span style="color:#66d9ef">Rational</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span> <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">this</span><span style="color:#f92672">.</span>numer <span style="color:#f92672">*</span> that<span style="color:#f92672">.</span>denom <span style="color:#f92672">&lt;</span> that<span style="color:#f92672">.</span>numer <span style="color:#f92672">*</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span>denom <span style="color:#75715e">//`this` can be omitted
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">def</span> max<span style="color:#f92672">(</span>that<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Rational</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Rational</span> <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span>less<span style="color:#f92672">(</span>that<span style="color:#f92672">)</span> then that <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">this</span>
</span></span></code></pre></div><h4 id="auxiliary-constructors">Auxiliary Constructors</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rational</span><span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> y<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">(</span><span style="color:#66d9ef">x:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">(</span>x<span style="color:#f92672">,</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">)</span> <span style="color:#75715e">//auxiliary method
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">Rational</span><span style="color:#f92672">(</span><span style="color:#ae81ff">2</span><span style="color:#f92672">)</span> <span style="color:#75715e">// 2/1
</span></span></span></code></pre></div><h3 id="extension-methods">Extension Methods</h3>
<p>Not having to define all methods that belong to a class inside the class itself. Extensions can only add new members, and cannot refer to ohter class members via <code>this</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>extension<span style="color:#f92672">(</span>r<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Rational</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">min</span><span style="color:#f92672">(</span><span style="color:#66d9ef">s:</span> <span style="color:#66d9ef">Rational</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">if</span> s<span style="color:#f92672">.</span>less<span style="color:#f92672">(</span>r<span style="color:#f92672">)</span> then s <span style="color:#66d9ef">else</span> r
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> abs<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Rational</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Rational</span><span style="color:#f92672">(</span>r<span style="color:#f92672">.</span>numer<span style="color:#f92672">.</span>abs<span style="color:#f92672">,</span> r<span style="color:#f92672">.</span>denom<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>Extensions can define operators. For example, operators such as <code>+</code> or <code>&lt;</code> count as identifiers in Scala.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>extension<span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Rational</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">+</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">y:</span> <span style="color:#66d9ef">Rational</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Rational</span> <span style="color:#f92672">=</span> x<span style="color:#f92672">.</span>add<span style="color:#f92672">(</span>y<span style="color:#f92672">)</span>
</span></span></code></pre></div><h3 id="enums-lec-144">Enums [Lec 1.4.4]</h3>
<p>An enum enumerates all the cases of an ADT(algebraic data types) and nothing else.</p>
<p>What is <em>algebraic data types</em>? Pure data definitions like this</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> <span style="color:#a6e22e">Expr</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">object</span> <span style="color:#a6e22e">Expr</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">class</span> <span style="color:#66d9ef">Var</span><span style="color:#f92672">(</span><span style="color:#66d9ef">s:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">extends</span> <span style="color:#66d9ef">Expr</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Number</span><span style="color:#f92672">(</span>n<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Expr</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Sum</span><span style="color:#f92672">(</span>e1<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Expr</span><span style="color:#f92672">,</span> e2<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Expr</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Expr</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Prod</span><span style="color:#f92672">(</span>e1<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Expr</span><span style="color:#f92672">,</span> e2<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Expr</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Expr</span>
</span></span></code></pre></div><p>We need to use <code>Expr.Number(1)</code> instead of <code>Number(1)</code>, or use <code>import Expr._</code></p>
<p>We can define the above like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>enum <span style="color:#a6e22e">Expr</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">Var</span><span style="color:#f92672">(</span><span style="color:#66d9ef">s:</span> <span style="color:#66d9ef">String</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">Number</span><span style="color:#f92672">(</span><span style="color:#66d9ef">n:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">Sum</span><span style="color:#f92672">(</span><span style="color:#66d9ef">e1:</span> <span style="color:#66d9ef">Expr</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">e2:</span> <span style="color:#66d9ef">Expr</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">Prod</span><span style="color:#f92672">(</span>e1<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Expr</span><span style="color:#f92672">,</span> e2<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Expr</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p>Enums can take parameters and can define methods. Enum cases that pass parameters have to use an explicit <code>extends</code> clause.</p>
<p>An enum can comprise parameterized and simple cases at the same time.</p>
<h3 id="option-type">Option Type</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> <span style="color:#a6e22e">Option</span><span style="color:#f92672">[</span><span style="color:#66d9ef">+A</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">case</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">[</span><span style="color:#66d9ef">+A</span><span style="color:#f92672">](</span>value<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">A</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Option</span><span style="color:#f92672">[</span><span style="color:#66d9ef">A</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">object</span> <span style="color:#a6e22e">None</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Option</span><span style="color:#f92672">[</span><span style="color:#66d9ef">Nothing</span><span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Options can be decomposed using pattern matching.</p>
<h1 id="deal-with-types-lec-141-lec-145-146">Deal with types [Lec 1.4.1] [Lec 1.4.5, 1.4.6]</h1>
<h2 id="type-tests">Type tests</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>x<span style="color:#f92672">.</span>isInstanceOf<span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">]</span> <span style="color:#75715e">//Boolean
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>x<span style="color:#f92672">.</span>asInstanceOf<span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">].</span>method <span style="color:#75715e">//T.method
</span></span></span></code></pre></div><p>Ugly and unsafe.</p>
<h2 id="pattern-matching">Pattern Matching</h2>
<p><strong>case class</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> <span style="color:#a6e22e">Expr</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">case</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Number</span><span style="color:#f92672">(</span>n<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Expr</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">case</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Sum</span><span style="color:#f92672">(</span>e1<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Expr</span><span style="color:#f92672">,</span> e2<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Expr</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Expr</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> eval<span style="color:#f92672">(</span>e<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Expr</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span> <span style="color:#f92672">=</span> e <span style="color:#66d9ef">match</span> <span style="color:#75715e">// def eval: Int = this match ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">Number</span><span style="color:#f92672">(</span>n<span style="color:#f92672">)</span> <span style="color:#66d9ef">=&gt;</span> n
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">Sum</span><span style="color:#f92672">(</span>e1<span style="color:#f92672">,</span> e2<span style="color:#f92672">)</span> <span style="color:#66d9ef">=&gt;</span> eval<span style="color:#f92672">(</span>e1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> eval<span style="color:#f92672">(</span>e2<span style="color:#f92672">)</span>
</span></span></code></pre></div><p><code>MatchError</code> is thrown if no pattern matches the value of the selector.</p>
<h2 id="type-bounds">Type bounds</h2>
<p><code>S &lt;: T</code> means S is a subtype of T. <code>S &gt;: T</code> means S is a supertype of T. <code>S &gt;: NonEmpty &lt;: IntSet</code> restricts S any type on the interval between NonEmpty and IntSet.</p>
<h3 id="variance-lec-146">Variance [Lec 1.4.6]</h3>
<p>C[T] is a parameterized type and A, B are types such that A &lt;: B. <strong>If A &lt;: B, the everything one can do with a value of type B one should also be able to do with a value of type A.</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>C<span style="color:#f92672">[</span><span style="color:#66d9ef">A</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">&lt;:</span> C<span style="color:#f92672">[</span><span style="color:#66d9ef">B</span><span style="color:#f92672">]</span> <span style="color:#75715e">// C is covariant. class C[+A]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>C<span style="color:#f92672">[</span><span style="color:#66d9ef">A</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">&gt;:</span> C<span style="color:#f92672">[</span><span style="color:#66d9ef">B</span><span style="color:#f92672">]</span> <span style="color:#75715e">// C is contravariant. class C[-A]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>neither C<span style="color:#f92672">[</span><span style="color:#66d9ef">A</span><span style="color:#f92672">]</span> and C<span style="color:#f92672">[</span><span style="color:#66d9ef">B</span><span style="color:#f92672">]</span> is a subtype of the other <span style="color:#75715e">// C is nonvariant. class C[A]
</span></span></span></code></pre></div><p>If A2 &lt;: A1 and B1 &lt;: B2 then A1 =&gt; B1 &lt;: A2 =&gt; B2</p>
<p><code>A &lt;: B</code> =&gt; <code>List[A] &lt;: List[B]</code>. List is covariant.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> <span style="color:#a6e22e">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">+T</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">object</span> <span style="color:#a6e22e">Empty</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">Nothing</span><span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Array in Scala is not covariant.</p>
<p>Covariant type parameters can only appear in method results. Contravariant type parameters can only apperat in method parameters. In variant type parameters can appear anywhere.</p>
<p>Convariant type parameters may appear in lower bounds of method type parameters. Contravariant type parameters may appear in upper bounds.</p>
<h2 id="type-parameters">Type parameters</h2>
<h3 id="generic-functions">Generic Functions</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> singleton<span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">](</span>elem<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">T</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Cons</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">](</span>elem<span style="color:#f92672">,</span> <span style="color:#a6e22e">Nil</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">])</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>singleton<span style="color:#f92672">[</span><span style="color:#66d9ef">Int</span><span style="color:#f92672">](</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>singleton<span style="color:#f92672">[</span><span style="color:#66d9ef">Boolean</span><span style="color:#f92672">](</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><h3 id="implicit-parameter">Implicit parameter</h3>
<p>The compiler infers the argument value based on its expected type.</p>
<p>An implicit parameter is introduced by a using parameter clause like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> sort<span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">](</span>xs<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">])(</span>using ord<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Ordering</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">])</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Explicit argument:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>sort<span style="color:#f92672">(</span>string<span style="color:#f92672">)(</span>using <span style="color:#a6e22e">Ordering</span><span style="color:#f92672">.</span><span style="color:#a6e22e">String</span><span style="color:#f92672">)</span> <span style="color:#75715e">// the argument can be left out
</span></span></span></code></pre></div><p>Multiple parameters can be in a using clause or several using clauses.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> f<span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)(</span>using a<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">A</span><span style="color:#f92672">,</span> b<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">B</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//or
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">def</span> f<span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)(</span>using a<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">A</span><span style="color:#f92672">)(</span>using b<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">B</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">(</span>x<span style="color:#f92672">)(</span>using a<span style="color:#f92672">,</span> b<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>Parameters of a using clause can be anonymous, or using a context bound</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> sort<span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">](</span>xs<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">])(</span>using <span style="color:#a6e22e">Ordering</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">])</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> sort<span style="color:#f92672">[</span><span style="color:#66d9ef">T:</span> <span style="color:#66d9ef">Ordeing</span><span style="color:#f92672">](</span>xs<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">])</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">]</span>  <span style="color:#66d9ef">=</span> <span style="color:#f92672">...</span>
</span></span></code></pre></div><h4 id="given-instances">Given Instances</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">object</span> <span style="color:#a6e22e">Ordering</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">given</span> <span style="color:#66d9ef">Int</span> <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">Ordering</span><span style="color:#f92672">[</span><span style="color:#66d9ef">Int</span><span style="color:#f92672">]</span><span style="color:#66d9ef">:</span> <span style="color:#75715e">// what is after as is the true name of this instance  
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// This code defines a given instance of type Ordering[Int], named Int (or other names!).
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">def</span> <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>	given <span style="color:#a6e22e">Ordering</span><span style="color:#f92672">[</span><span style="color:#66d9ef">Double</span><span style="color:#f92672">]</span><span style="color:#66d9ef">:</span> <span style="color:#75715e">//given abitrary name as Ordering[Double]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//Anonymous given instance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">def</span> <span style="color:#f92672">...</span>
</span></span></code></pre></div><p>A type class trait may define extension methods, to contain comparison methods like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> <span style="color:#a6e22e">Ordering</span><span style="color:#f92672">[</span><span style="color:#66d9ef">A</span><span style="color:#f92672">]</span><span style="color:#a6e22e">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> compare<span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">A</span><span style="color:#f92672">,</span> y<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">A</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	extension <span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">A</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">def</span> <span style="color:#f92672">&lt;</span> <span style="color:#f92672">(</span>y<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">A</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span> <span style="color:#f92672">=</span> compare<span style="color:#f92672">(</span>x<span style="color:#f92672">,</span> y<span style="color:#f92672">)</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">...</span>
</span></span></code></pre></div><p>Extension methods on a type class trait are visible whenever a given instance for the trait is available.</p>
<h4 id="summoning-an-instance">Summoning an Instance</h4>
<p>Refering to an instance by its type.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>summon<span style="color:#f92672">[</span><span style="color:#66d9ef">Ordering</span><span style="color:#f92672">[</span><span style="color:#66d9ef">Int</span><span style="color:#f92672">]]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> summon<span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">](</span>using x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">T</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> x
</span></span></code></pre></div><h1 id="collections">Collections</h1>
<h2 id="lists">Lists</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> <span style="color:#a6e22e">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">]</span><span style="color:#a6e22e">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> isEmpty<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Boolean</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> head<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">T</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> tail<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Cons</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">](</span><span style="color:#66d9ef">val</span> head<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">T</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">val</span> tail<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">])</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">]</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">isEmpty</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Nil</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">]</span> <span style="color:#a6e22e">extends</span> <span style="color:#a6e22e">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">]</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">isEmpty</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> head <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">NoSuchElementException</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Nil.head&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> tail <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">NoSuchElementException</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Nil.tail&#34;</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p>[T]: type parameters</p>
<p>Lists are homogeneous. The type of a list with elements of type T is written as List[T]/scala.List[T].</p>
<p>All lists are constucted from: empty list <code>Nil</code> and construction operation <code>::</code>. For example: <code>x::xs</code> give a new list with the first element x followed by elements of xs. <strong>Operators ending in &ldquo;:&rdquo; associate to the right</strong>.</p>
<p>Operations on Lists: <a href="https://www.scala-lang.org/api/current/scala/collection/immutable/List.html">List</a></p>
<p>Often used: (also for other sequences)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">:</span><span style="color:#66d9ef">+</span> <span style="color:#75715e">// append an element at the end
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">:</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">:</span><span style="color:#66d9ef">::</span> <span style="color:#66d9ef">or</span> <span style="color:#66d9ef">++</span> <span style="color:#75715e">//concatenation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>contains
</span></span><span style="display:flex;"><span>head 
</span></span><span style="display:flex;"><span>last
</span></span><span style="display:flex;"><span>tail
</span></span><span style="display:flex;"><span>init
</span></span><span style="display:flex;"><span>isEmpty<span style="color:#f92672">/</span>nonEmpty
</span></span><span style="display:flex;"><span>exists<span style="color:#f92672">(</span>p<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">val a = &#34;some random test message&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">val keys = List(&#34;hi&#34;,&#34;random&#34;,&#34;test&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">To check whether the string `a` contains any values from `keys`:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">keys.exists(a.contains)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span>filter
</span></span><span style="display:flex;"><span>filterNot
</span></span><span style="display:flex;"><span>withFilter <span style="color:#75715e">// used in map, flatMap, foreach. It will not produce a new collection.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>find <span style="color:#75715e">// return an Option, use `get` to get the value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>indexOf
</span></span><span style="display:flex;"><span>map
</span></span><span style="display:flex;"><span>forall<span style="color:#f92672">(</span>p<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>flatMap<span style="color:#f92672">(</span>f<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>flatten
</span></span><span style="display:flex;"><span>foldLeft
</span></span><span style="display:flex;"><span>foldRight
</span></span><span style="display:flex;"><span>length
</span></span><span style="display:flex;"><span>sort
</span></span><span style="display:flex;"><span>mkString
</span></span><span style="display:flex;"><span>reverse
</span></span><span style="display:flex;"><span>take<span style="color:#f92672">(</span>n<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>drop<span style="color:#f92672">(</span>n<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>sorted <span style="color:#75715e">// default acsending order for the type
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>sortWith<span style="color:#f92672">(</span>order<span style="color:#f92672">)</span> <span style="color:#75715e">// e.g. _.length &lt; _.length
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>xs<span style="color:#f92672">.</span>zip<span style="color:#f92672">(</span>ys<span style="color:#f92672">)</span> <span style="color:#75715e">// A sequence of pairs drawn from corresponding elements of sequences xs and ys
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>span<span style="color:#f92672">(</span>p<span style="color:#66d9ef">:</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">A</span><span style="color:#f92672">)</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Boolean</span><span style="color:#f92672">)</span> <span style="color:#75715e">// Splits this list into a prefix/suffix pair according to a predicate.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>distinct <span style="color:#75715e">//make elements distinct
</span></span></span></code></pre></div><h3 id="reduction-of-lists-lec-1-5-4">Reduction of Lists (Lec 1-5-4)</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#a6e22e">List</span><span style="color:#f92672">(</span>x1<span style="color:#f92672">,...,</span>xn<span style="color:#f92672">).</span>reduceLeft<span style="color:#f92672">(</span>op<span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> x1<span style="color:#f92672">.</span>op<span style="color:#f92672">(</span>x2<span style="color:#f92672">).</span>op<span style="color:#f92672">(</span>x3<span style="color:#f92672">)...</span> <span style="color:#f92672">.</span>op<span style="color:#f92672">(</span>xn<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> sum<span style="color:#f92672">(</span>xs<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">Int</span><span style="color:#f92672">])</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">(</span><span style="color:#ae81ff">0</span><span style="color:#66d9ef">:</span><span style="color:#66d9ef">:xs</span><span style="color:#f92672">).</span>reduceLeft<span style="color:#f92672">((</span>x<span style="color:#f92672">,</span>y<span style="color:#f92672">)</span> <span style="color:#66d9ef">=&gt;</span> x<span style="color:#f92672">+</span>y<span style="color:#f92672">)</span> <span style="color:#75715e">// (_+_)
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> foldRight<span style="color:#f92672">[</span><span style="color:#66d9ef">A</span>,<span style="color:#66d9ef">B</span><span style="color:#f92672">](</span>as<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">A</span><span style="color:#f92672">],</span> z<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">B</span><span style="color:#f92672">)(</span>f<span style="color:#66d9ef">:</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">A</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">B</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=&gt;</span> B<span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">B</span> <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>	as <span style="color:#66d9ef">match</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">Nil</span> <span style="color:#66d9ef">=&gt;</span> z
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">case</span> x<span style="color:#66d9ef">:</span><span style="color:#66d9ef">:xs</span> <span style="color:#f92672">=&gt;</span> f<span style="color:#f92672">(</span>x<span style="color:#f92672">,</span> foldRight<span style="color:#f92672">(</span>xs<span style="color:#f92672">,</span> z<span style="color:#f92672">)(</span>f<span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">List</span><span style="color:#f92672">(</span>x1<span style="color:#f92672">,...,</span>xn<span style="color:#f92672">).</span>foldRight<span style="color:#f92672">(</span>z<span style="color:#f92672">)(</span>f<span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> x1<span style="color:#f92672">.</span>op<span style="color:#f92672">(</span>x2<span style="color:#f92672">.</span>op<span style="color:#f92672">(...</span>xn<span style="color:#f92672">.</span>op<span style="color:#f92672">(</span>z<span style="color:#f92672">)))</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> foldLeft<span style="color:#f92672">[</span><span style="color:#66d9ef">A</span>,<span style="color:#66d9ef">B</span><span style="color:#f92672">](</span>as<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">A</span><span style="color:#f92672">],</span> z<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">B</span><span style="color:#f92672">)(</span>f<span style="color:#66d9ef">:</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">B</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">A</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=&gt;</span> B<span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">B</span> <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>	as <span style="color:#66d9ef">match</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">Nil</span> <span style="color:#66d9ef">=&gt;</span> z
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">case</span> x<span style="color:#66d9ef">:</span><span style="color:#66d9ef">:xs</span> <span style="color:#f92672">=&gt;</span> foldLeft<span style="color:#f92672">(</span>xs<span style="color:#f92672">,</span> f<span style="color:#f92672">(</span>z<span style="color:#f92672">,</span> x<span style="color:#f92672">))(</span>f<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span></code></pre></div><p><code>foldRight</code> and <code>foldLeft</code> can also be methods of an abstract class:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>foldLeft<span style="color:#f92672">(</span>as<span style="color:#f92672">,</span> z<span style="color:#f92672">)(</span>f<span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> z<span style="color:#f92672">.</span>op<span style="color:#f92672">(</span>x1<span style="color:#f92672">).</span>op<span style="color:#f92672">(</span>x2<span style="color:#f92672">).</span> <span style="color:#f92672">...</span> <span style="color:#f92672">.</span>op<span style="color:#f92672">(</span>xn<span style="color:#f92672">)</span>
</span></span></code></pre></div><h3 id="reasoning-about-lists-referential-transparency">Reasoning about Lists: Referential Transparency</h3>
<p>To prove a property P(xs) for all lists xs.</p>
<ul>
<li>show that P(Nil) holds</li>
<li>For a list xs and some element x, show if P(xs) holds, then P(x::xs) holds</li>
</ul>
<h2 id="tuple-class">Tuple class</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> pair <span style="color:#66d9ef">=</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#34;answer&#34;</span><span style="color:#f92672">,</span> <span style="color:#ae81ff">42</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>pair<span style="color:#f92672">.</span>_1 <span style="color:#75715e">// String = answer
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>pair<span style="color:#f92672">.</span>_2 <span style="color:#75715e">// Int = 42
</span></span></span></code></pre></div><h2 id="vectors">Vectors</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>x <span style="color:#f92672">+:</span> xs 
</span></span><span style="display:flex;"><span>xs <span style="color:#66d9ef">:</span><span style="color:#66d9ef">+</span> <span style="color:#66d9ef">x</span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e">// x is element, xs is the  =sequence
</span></span></span></code></pre></div><h2 id="ranges">Ranges</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> r<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Range</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> until <span style="color:#ae81ff">5</span> <span style="color:#75715e">// 1, 2, 3, 4
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> s<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Range</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> to <span style="color:#ae81ff">5</span> <span style="color:#75715e">// 1, 2, 3, 4, 5
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> t<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Range</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> to <span style="color:#ae81ff">10</span> by <span style="color:#ae81ff">3</span> <span style="color:#75715e">// 1, 4, 7, 10
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>r<span style="color:#f92672">.</span>toList <span style="color:#75715e">// List(1, 2, 3, 4)
</span></span></span></code></pre></div><h2 id="sets">Sets</h2>
<p>Sets are unordered and do not have duplicate elements.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> fruit <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Set</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;apple&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;banana&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;pear&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> s <span style="color:#66d9ef">=</span> <span style="color:#f92672">(</span><span style="color:#ae81ff">1</span> to <span style="color:#ae81ff">6</span><span style="color:#f92672">).</span>toSet
</span></span><span style="display:flex;"><span>fruit<span style="color:#f92672">.</span>contains<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;apple&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">// true
</span></span></span></code></pre></div><h2 id="maps">Maps</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#75715e">// Map[Key, Value]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> hey <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Map</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;A&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;B&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;C&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">3</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> hi <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Map</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;B&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">4</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>hey<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;A&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">// 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>hey<span style="color:#f92672">.</span>get<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;A&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">// Some(1)
</span></span></span></code></pre></div><p>Some operations:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#75715e">// Concatenation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>hey <span style="color:#f92672">++</span> hi <span style="color:#75715e">// Map(A -&gt; 1, B -&gt; 4, C -&gt; 3)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>hi <span style="color:#f92672">++</span> hey <span style="color:#75715e">// Map(B -&gt; 2, A -&gt; 1, C -&gt; 3)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Maybe what is after ++ will update the value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>hey <span style="color:#f92672">+</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#34;D&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">5</span><span style="color:#f92672">)</span> <span style="color:#75715e">// Map(A -&gt; 1, B -&gt; 2, C -&gt; 3, D -&gt; 5)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// GroupBy:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> a <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">List</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;apple&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;banana&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;pear&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;peach&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">.</span>groupBy<span style="color:#f92672">(</span><span style="color:#66d9ef">_</span><span style="color:#f92672">.</span>head<span style="color:#f92672">)</span> <span style="color:#75715e">// HashMap(a -&gt; List(apple), b -&gt; List(banana), p -&gt; List(pear, peach))
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Default Values: turn a map into a function
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> temp <span style="color:#66d9ef">=</span> hey<span style="color:#f92672">.</span>withDefaultValue<span style="color:#f92672">(</span><span style="color:#ae81ff">42</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>temp<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;A&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">// 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>temp<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;K&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">// 42
</span></span></span></code></pre></div><p>We can use map to map a String to a sequence</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> a <span style="color:#66d9ef">=</span> <span style="color:#e6db74">&#34;abc&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> b <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Map</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;A&#39;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;B&#39;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;C&#39;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">3</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">.</span>toUpperCase<span style="color:#f92672">.</span>map<span style="color:#f92672">(</span>b<span style="color:#f92672">)</span> <span style="color:#75715e">// ArraySeq(1, 2, 3)
</span></span></span></code></pre></div><h3 id="lazylist">LazyList</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> xs <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">LazyList</span><span style="color:#f92672">.</span>cons<span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">LazyList</span><span style="color:#f92672">.</span>cons<span style="color:#f92672">(</span><span style="color:#ae81ff">2</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">LazyList</span><span style="color:#f92672">.</span>empty<span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> a <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">List</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">,</span><span style="color:#ae81ff">2</span><span style="color:#f92672">,</span><span style="color:#ae81ff">3</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">.</span>to<span style="color:#f92672">(</span><span style="color:#a6e22e">LazyList</span><span style="color:#f92672">)</span> <span style="color:#75715e">// toLazyList
</span></span></span></code></pre></div><p>LazyListsupport almost all methods of List.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>x <span style="color:#f92672">#</span><span style="color:#66d9ef">:</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">xs</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">LazyList</span><span style="color:#f92672">.</span>cons<span style="color:#f92672">(</span>x<span style="color:#f92672">,</span> xs<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// note the #, ite produces a lazy list
</span></span></span></code></pre></div><p>LazyList can define infinite lists.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> from<span style="color:#f92672">(</span>n<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Int</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">LazyList</span><span style="color:#f92672">[</span><span style="color:#66d9ef">Int</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">=</span> n <span style="color:#f92672">#</span><span style="color:#66d9ef">:</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">from</span><span style="color:#f92672">(</span><span style="color:#66d9ef">n+</span><span style="color:#960050;background-color:#1e0010">1</span><span style="color:#f92672">)</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> <span style="color:#66d9ef">nat</span> <span style="color:#f92672">=</span> from<span style="color:#f92672">(</span><span style="color:#ae81ff">0</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// This is a kind of method to generate infinite list.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> x <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> improve<span style="color:#f92672">(</span>guess<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Double</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">(</span>guess <span style="color:#f92672">+</span> x<span style="color:#f92672">/</span>guess<span style="color:#f92672">)/</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">lazy</span> <span style="color:#66d9ef">val</span> guesses<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">LazyList</span><span style="color:#f92672">[</span><span style="color:#66d9ef">Double</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">#</span><span style="color:#66d9ef">:</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">guesses.map</span><span style="color:#f92672">(</span><span style="color:#66d9ef">improve</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// This is another method, using map
</span></span></span></code></pre></div><h3 id="functions-for-collections">Functions for collections</h3>
<h4 id="mapping">Mapping</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>extension <span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">](</span>xs<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">])</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> map<span style="color:#f92672">[</span><span style="color:#66d9ef">U</span><span style="color:#f92672">](</span>f<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">T</span><span style="color:#f92672">=&gt;</span>U<span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">U</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">=</span> xs <span style="color:#66d9ef">match</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">Nil</span> <span style="color:#66d9ef">=&gt;</span> xs
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">case</span> x<span style="color:#66d9ef">:</span><span style="color:#66d9ef">:xs</span> <span style="color:#f92672">=&gt;</span> f<span style="color:#f92672">(</span>x<span style="color:#f92672">)</span> <span style="color:#66d9ef">:</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">xs.map</span><span style="color:#f92672">(</span><span style="color:#66d9ef">f</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p>Actual defiintion of map is tail-recursive and works for arbitrary collections.</p>
<h4 id="filtering">Filtering</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>extension <span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">](</span>xs<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">])</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> filter<span style="color:#f92672">(</span>p<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">T</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Boolean</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">this</span> <span style="color:#66d9ef">match</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">Nil</span> <span style="color:#66d9ef">=&gt;</span> <span style="color:#66d9ef">this</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">case</span> x<span style="color:#66d9ef">:</span><span style="color:#66d9ef">:xs</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">if</span> p<span style="color:#f92672">(</span>x<span style="color:#f92672">)</span> then x<span style="color:#66d9ef">:</span><span style="color:#66d9ef">:xs.filter</span><span style="color:#f92672">(</span><span style="color:#66d9ef">p</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">xs.filter</span><span style="color:#f92672">(</span><span style="color:#66d9ef">p</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><h3 id="for-expressions">For-Expressions</h3>
<p>For-expression is similar to loops, but it builds a list of the results of all iterations.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> s <span style="color:#66d9ef">yield</span> e <span style="color:#75715e">// s: generators and filters, e: an element returned by the iteration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> 
</span></span><span style="display:flex;"><span>	i <span style="color:#66d9ef">&lt;-</span> <span style="color:#ae81ff">1</span> until n
</span></span><span style="display:flex;"><span>	j <span style="color:#66d9ef">&lt;-</span> <span style="color:#ae81ff">1</span> until i
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> isPrime<span style="color:#f92672">(</span>i<span style="color:#f92672">+</span>j<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">yield</span> <span style="color:#f92672">(</span>i<span style="color:#f92672">,</span>j<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// This expression equals to (1 until n).flatMap(i =&gt; (1 until i).map(j =&gt; (i,j))).filter((i, j) =&gt; isPrime(i+j))
</span></span></span></code></pre></div><p>The type of the sequence can be modified at the start:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> 
</span></span><span style="display:flex;"><span>	i <span style="color:#66d9ef">&lt;-</span> <span style="color:#f92672">(</span><span style="color:#ae81ff">1</span> until n<span style="color:#f92672">).</span>toSet
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">yield</span> 
</span></span><span style="display:flex;"><span>	i
</span></span><span style="display:flex;"><span><span style="color:#75715e">// thus will generate a set
</span></span></span></code></pre></div><p>For expressions can be used with pattern matching.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> 
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#34;phoneNumbers&#34;</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">JSON</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Seq</span><span style="color:#f92672">(</span>numberInfos<span style="color:#f92672">))</span> <span style="color:#66d9ef">&lt;-</span> bindings<span style="color:#f92672">(</span>jsData<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>	numberInfo <span style="color:#66d9ef">&lt;-</span> numberInfos
</span></span></code></pre></div><p>With case, only take certain elements that match the case pattern.</p>
<p>The syntax of <code>for</code> is closely related to the higher-order functions <code>map, flatMap, filter</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> x <span style="color:#66d9ef">&lt;-</span> e1 <span style="color:#66d9ef">yield</span> e2
</span></span><span style="display:flex;"><span><span style="color:#75715e">// is translated to 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>e1<span style="color:#f92672">.</span>map<span style="color:#f92672">(</span>x <span style="color:#66d9ef">=&gt;</span> e2<span style="color:#f92672">)</span>
</span></span></code></pre></div><h3 id="functional-random-generators">Functional random generators</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> <span style="color:#a6e22e">Generator</span><span style="color:#f92672">[</span><span style="color:#66d9ef">+T</span><span style="color:#f92672">]</span><span style="color:#a6e22e">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> tenerate<span style="color:#f92672">()</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">T</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> integers <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Generator</span><span style="color:#f92672">[</span><span style="color:#66d9ef">Int</span><span style="color:#f92672">]</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">val</span> <span style="color:#66d9ef">rand</span> <span style="color:#f92672">=</span> java<span style="color:#f92672">.</span>util<span style="color:#f92672">.</span><span style="color:#a6e22e">Random</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> generate<span style="color:#f92672">()</span> <span style="color:#66d9ef">=</span> rand<span style="color:#f92672">.</span>nextInt<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>extension <span style="color:#f92672">[</span><span style="color:#66d9ef">T</span>, <span style="color:#66d9ef">S</span><span style="color:#f92672">](</span>g<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Generator</span><span style="color:#f92672">[</span><span style="color:#66d9ef">T</span><span style="color:#f92672">])</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> map<span style="color:#f92672">(</span>f<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">T</span> <span style="color:#f92672">=&gt;</span> S<span style="color:#f92672">)</span> <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Generator</span><span style="color:#f92672">[</span><span style="color:#66d9ef">S</span><span style="color:#f92672">]</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">def</span> <span style="color:#66d9ef">generate</span><span style="color:#f92672">()</span> <span style="color:#f92672">=</span> f<span style="color:#f92672">(</span>g<span style="color:#f92672">.</span>generate<span style="color:#f92672">())</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> booleans <span style="color:#66d9ef">=</span> integers<span style="color:#f92672">.</span>map<span style="color:#f92672">(</span>x <span style="color:#66d9ef">=&gt;</span> x<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><h4 id="random-test-function">Random Test Function</h4>
<p>ScalaCheck</p>
<h1 id="syntactic-miscellaneous">Syntactic Miscellaneous</h1>
<h2 id="makestring">makeString</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">${}</span><span style="color:#e6db74">....</span><span style="color:#e6db74">${}</span><span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><p><code>s</code> means where the string begins, and everything in the braces following a <code>$</code> will be interpreted as an expression evaluated.</p>
<h2 id="override-def">override def</h2>
<p>Not to use default methods but our own methods.</p>
<h2 id="conditions">Conditions</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>require<span style="color:#f92672">(</span><span style="color:#a6e22e">Expr</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;IllegalArgumentExceptionMessage&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">// check the precondition
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>assert<span style="color:#f92672">(</span><span style="color:#a6e22e">Expr</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;AssertionErrorMessage&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">//check the bugs
</span></span></span></code></pre></div><h2 id="infix-notation">Infix Notation</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>extention <span style="color:#f92672">(</span>x<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Rational</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">@infix</span> <span style="color:#66d9ef">def</span> <span style="color:#66d9ef">min</span><span style="color:#f92672">(</span><span style="color:#66d9ef">y:</span> <span style="color:#66d9ef">Rational</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Rational</span> <span style="color:#f92672">=</span> <span style="color:#f92672">...</span>
</span></span></code></pre></div><p><code>r min s</code> = <code>r.min(s)</code></p>
<p><code>r+s</code> = <code>r.+(s)</code></p>
<h3 id="precedence-rules">Precedence Rules</h3>
<h2 id="exceptions">Exceptions</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Exc</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Message&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">//type: Nothing
</span></span></span></code></pre></div><p>A try/catch expression consist of a body and one/more handlers.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">try</span> <span style="color:#f92672">{...}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">catch</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> e<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">NoSuchElementException</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">...</span> 
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">BadInput</span><span style="color:#f92672">(</span>msg<span style="color:#f92672">)</span> <span style="color:#66d9ef">=&gt;</span> <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p><img src="../../images/precedence.png" alt=""></p>
<h2 id="repeated-parameter">Repeated parameter</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> apply<span style="color:#f92672">[</span><span style="color:#66d9ef">A</span><span style="color:#f92672">](</span>as<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">A*</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">A</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">...</span>
</span></span></code></pre></div><p><code>*_</code> none or several parameters of type A can be taken.</p>
</section>

  
  

  
  
  
  
  <nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]">
    
    <a
      class="flex w-1/2 items-center rounded-l-md p-6 pr-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]"
      href="http://localhost:1313/blog/posts/ode/"
      ><span class="mr-1.5">←</span><span>Neural ODE</span></a
    >
    
    
    <a
      class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]"
      href="http://localhost:1313/blog/posts/vulkanbasic/"
      ><span>Vulkan学习(1) Basics</span><span class="ml-1.5">→</span></a
    >
    
  </nav>
  
  

  
  

  
  

  


  
</article>


    </main>

    <footer
  class="opaco mx-auto flex h-[4.5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"
>
  <div class="mr-auto">
    &copy; 2024
    <a class="link" href="http://localhost:1313/blog/">Azure</a>
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >Powered by Hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >✎ Paper</a
  >
</footer>

  </body>
</html>
